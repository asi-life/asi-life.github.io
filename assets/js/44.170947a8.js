(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{538:function(t,e,v){"use strict";v.r(e);var _=v(4),a=Object(_.a)({},(function(){var t=this,e=t.$createElement,v=t._self._c||e;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h2",{attrs:{id:"zookeeperç®€å•ä»‹ç»"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#zookeeperç®€å•ä»‹ç»"}},[t._v("#")]),t._v(" Zookeeperç®€å•ä»‹ç»")]),t._v(" "),v("p",[t._v("zookeeperä¸»è¦ç”¨äºç®¡ç†ï¼Œè¿›è¡Œåˆ†å¸ƒå¼ä¹‹é—´å®¢æˆ·ç«¯çš„ç®¡ç†ã€‚")]),t._v(" "),v("p",[t._v("znodeèŠ‚ç‚¹ï¼ŒZookeeperä¸­æ•°æ®åŸºæœ¬å•å…ƒå«åšèŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹ä¹‹ä¸‹åŒ…å«å­èŠ‚ç‚¹ï¼Œæœ€åä»¥æ ‘çº§æ–¹å¼å‘ˆç°ã€‚æ¯ä¸ªèŠ‚ç‚¹æ‹¥æœ‰å”¯ä¸€è·¯å¾„pathã€‚å®¢æˆ·ç«¯åŸºäºPathä¸Šä¼ èŠ‚ç‚¹æ•°æ®ï¼Œzookeeperæ”¶åˆ°åä¼šå®æ—¶é€šçŸ¥å¯¹è¯¥è·¯å¾„è¿›è¡Œç›‘å¬çš„å®¢æˆ·ç«¯ã€‚")]),t._v(" "),v("p",[t._v("åœºæ™¯ï¼šé”ï¼Œjobï¼Œé…ç½®ï¼ŒæœåŠ¡æ³¨å†Œç­‰ã€‚")]),t._v(" "),v("h3",{attrs:{id:"å®¢æˆ·ç«¯å‘½ä»¤"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#å®¢æˆ·ç«¯å‘½ä»¤"}},[t._v("#")]),t._v(" å®¢æˆ·ç«¯å‘½ä»¤")]),t._v(" "),v("p",[t._v("close å…³é—­å½“å‰ä¼šè¯")]),t._v(" "),v("p",[t._v("connect è¿æ¥")]),t._v(" "),v("p",[t._v("create åˆ›å»ºèŠ‚ç‚¹")]),t._v(" "),v("p",[t._v("delete åˆ é™¤èŠ‚ç‚¹")]),t._v(" "),v("p",[t._v("deleteall åˆ é™¤èŠ‚ç‚¹")]),t._v(" "),v("p",[t._v("get è·å–èŠ‚ç‚¹")]),t._v(" "),v("p",[t._v("getAcl è·å–æƒé™é…ç½®")]),t._v(" "),v("h3",{attrs:{id:"zookeeperèŠ‚ç‚¹ä»‹ç»"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#zookeeperèŠ‚ç‚¹ä»‹ç»"}},[t._v("#")]),t._v(" ZookeeperèŠ‚ç‚¹ä»‹ç»")]),t._v(" "),v("ol",[v("li",[t._v("èŠ‚ç‚¹ç±»å‹")])]),t._v(" "),v("p",[t._v("a). PERSISTENT   æŒä¹…åŒ–èŠ‚ç‚¹  ä½¿ç”¨ create åˆ›å»º")]),t._v(" "),v("p",[t._v("b). PERSISTENT_SEQUENTIAL   æŒä¹…åºå·èŠ‚ç‚¹  ä½¿ç”¨ create -s åˆ›å»ºï¼ŒååŠ åºå·ã€‚")]),t._v(" "),v("p",[t._v("c). EPHEMERAL    ä¸´æ—¶èŠ‚ç‚¹(ä¸å¯æ‹¥æœ‰å­èŠ‚ç‚¹)  ä½¿ç”¨ create -e åˆ›å»º")]),t._v(" "),v("p",[t._v("d). EPHEMERAL_SEQUENTIAL   ä¸´æ—¶åºå·èŠ‚ç‚¹(ä¸å¯æ‹¥æœ‰å­èŠ‚ç‚¹) ä½¿ç”¨ create -e -s åˆ›å»ºï¼ŒååŠ åºå·ã€‚")]),t._v(" "),v("ol",{attrs:{start:"2"}},[v("li",[t._v("æŸ¥è¯¢èŠ‚ç‚¹å±æ€§")])]),t._v(" "),v("p",[t._v("stat /")]),t._v(" "),v("p",[t._v("èŠ‚ç‚¹å±æ€§è¡¨å¦‚ä¸‹ï¼š")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("å­—æ®µ")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("æè¿°")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("cZxid")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("åˆ›å»ºèŠ‚ç‚¹çš„äº‹åŠ¡id")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("ctime")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("åˆ›å»ºæ—¶é—´")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("mZxid")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("ä¿®æ”¹èŠ‚ç‚¹çš„äº‹åŠ¡id")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("mtime")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("æœ€åä¿®æ”¹æ—¶é—´")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("pZxid")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("å­èŠ‚ç‚¹å˜æ›´çš„äº‹åŠ¡id")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("cversion")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("è¡¨ç¤ºå¯¹æ­¤znodeçš„å­èŠ‚ç‚¹è¿›è¡Œçš„æ›´æ”¹æ¬¡æ•°(ä¸åŒ…æ‹¬å­èŠ‚ç‚¹)")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("dataVersion")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("æ•°æ®ç‰ˆæœ¬ï¼Œå˜æ›´æ¬¡æ•°")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("aclVersion")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("æƒé™ç‰ˆæœ¬ï¼Œå˜æ›´æ¬¡æ•°")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("ephemeralOwner")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("ä¸´æ—¶èŠ‚ç‚¹æ‰€å±ä¼šè¯id")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("dataLength")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("æ•°æ®é•¿åº¦")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("numChildren")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("å­èŠ‚ç‚¹æ•°(ä¸åŒ…å«å­å­èŠ‚ç‚¹)")])])])]),t._v(" "),v("p",[t._v("å®¢æˆ·ç«¯ä½¿ç”¨ -w å¯ä»¥å¯¹æœåŠ¡ç«¯è¿›è¡Œç›‘å¬")]),t._v(" "),v("ol",{attrs:{start:"3"}},[v("li",[t._v("aclæƒé™è®¾ç½®")])]),t._v(" "),v("p",[t._v("ACLå…¨ç¨‹Access Control List(è®¿é—®æ§åˆ¶åˆ—è¡¨)ã€‚Zookeeperä½¿ç”¨ACLæ¥æ§åˆ¶å¯¹å…¶znodeçš„è®¿é—®ã€‚åŸºäºschemeğŸ†”permissionçš„æ–¹å¼è¿›è¡Œæƒé™æ§åˆ¶ã€‚schemeè¡¨ç¤ºæˆæƒæ¨¡å¼ï¼Œidæ¨¡å¼å¯¹åº”å€¼ï¼Œpermissionå³å…·ä½“çš„å¢åˆ æ”¹æƒé™ä½ã€‚")]),t._v(" "),v("p",[t._v("a). schemeï¼šè®¤è¯æ¨¡å¼")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("æ–¹æ¡ˆ")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("æè¿°")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("world")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("å¼€æ”¾æ¨¡å¼ï¼Œå…¨ä¸–ç•Œéƒ½å¯ä»¥è®¿é—®")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("ip")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("ipæ¨¡å¼ï¼Œé™å®šå®¢æˆ·ç«¯ipè®¿é—®")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("auth")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("ç”¨æˆ·å¯†ç è®¤è¯æ¨¡å¼ï¼Œåªæœ‰åœ¨ä¼šè¯ä¸­æ·»åŠ äº†è®¤è¯æ‰å¯ä»¥è®¿é—®")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("digest")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("ä¸authç›¸ä¼¼ï¼ŒåŒºåˆ«åœ¨äºauthä¸ºé“­æ–‡å¯†ç ï¼Œdigestä½¿ç”¨äº†sha-1 + base64åŠ å¯†åçš„å¯†ç ")])])])]),t._v(" "),v("p",[t._v("b). permissionæƒé™ä½")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("æƒé™ä½")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("æƒé™")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("æè¿°")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("c")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("CREATE")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("å¯ä»¥åˆ›å»ºå­èŠ‚ç‚¹")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("d")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("DELETE")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("å¯ä»¥åˆ é™¤å­èŠ‚ç‚¹")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("r")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("READ")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("å¯ä»¥è¯»å–èŠ‚ç‚¹æ•°æ®åŠæ˜¾ç¤ºå­èŠ‚ç‚¹åˆ—è¡¨")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("w")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("WRITE")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("å¯ä»¥è®¾ç½®èŠ‚ç‚¹æ•°æ®")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("a")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("ADMIN")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("å¯ä»¥è®¾ç½®èŠ‚ç‚¹è®¿é—®æ§åˆ¶åˆ—è¡¨æƒé™")])])])]),t._v(" "),v("p",[t._v("c). aclç›¸å…³å‘½ä»¤")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("å‘½ä»¤")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("ä½¿ç”¨æ–¹æ³•")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("æè¿°")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("getAcl")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("getAcl "),v("path")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("è¯»å–ACLæƒé™")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("setAcl")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("setAcl "),v("path",[v("acl")],1)]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("è®¾ç½®ACLæƒé™")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("addauth")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("addauth "),v("scheme",[v("auth")],1)],1),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("æ·»åŠ è®¤è¯ç”¨æˆ·")])])])]),t._v(" "),v("h3",{attrs:{id:"å¸¸ç”¨api"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#å¸¸ç”¨api"}},[t._v("#")]),t._v(" å¸¸ç”¨api")]),t._v(" "),v("p",[t._v("a). æ„é€ å‚æ•°")]),t._v(" "),v("p",[t._v("connectString: è¿æ¥åœ°å€+ç«¯å£")]),t._v(" "),v("p",[t._v("sessionTimeout: ä¼šè¯è¶…æ—¶æ—¶é—´ï¼Œè¯¥å€¼ä¸èƒ½è¶…è¿‡æœåŠ¡ç«¯æ‰€è®¾ç½®çš„minSessionTimeoutå’ŒmaxSessionTimeout")]),t._v(" "),v("p",[t._v("watcherï¼šä¼šè¯ç›‘å¬å™¨ï¼ŒæœåŠ¡ç«¯æ—¶é—´å°†ä¼šè§¦å‘è¯¥ç›‘å¬")]),t._v(" "),v("p",[t._v("sessionIdï¼š è‡ªå®šä¹‰ä¼šè¯id")]),t._v(" "),v("p",[t._v("sessionPasswdï¼š ä¼šè¯å¯†ç ")]),t._v(" "),v("p",[t._v("canBeReadOnlyï¼š è¿æ¥æ˜¯å¦ä¸ºåªè¯»çš„")]),t._v(" "),v("p",[t._v("aHostProviderï¼šæœåŠ¡ç«¯åœ°å€æä¾›è€…ï¼ŒæŒ‡ç¤ºå®¢æˆ·ç«¯å¦‚ä½•é€‰æ‹©æŸä¸ªæœåŠ¡æ¥è°ƒç”¨ã€‚")]),t._v(" "),v("h3",{attrs:{id:"zookeeperé›†ç¾¤"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#zookeeperé›†ç¾¤"}},[t._v("#")]),t._v(" zookeeperé›†ç¾¤")]),t._v(" "),v("p",[t._v("ä¸»è¦ç”¨äºè¯»å†™åˆ†ç¦»å’Œä¸»ä»è‡ªåŠ¨åˆ‡æ¢ï¼Œé›†ç¾¤è‡³å°‘ä¸‰å°ï¼Œä¸”æœ€å¥½ä½¿ç”¨å¥‡æ•°å°æœºå™¨ã€‚")]),t._v(" "),v("p",[t._v("é…ç½®è¯­æ³•ï¼šserver: <èŠ‚ç‚¹ID>="),v("IP",[t._v(":<æ•°æ®åŒæ­¥ç«¯å£>:<é€‰ä¸¾ç«¯å£>")])],1),t._v(" "),v("p",[t._v("a). èŠ‚ç‚¹ID: æœåŠ¡idæ‰‹åŠ¨æŒ‡å®š1è‡³125ä¹‹é—´çš„æ•°å­—ï¼Œå¹¶å†™é“å¯¹åº”æœåŠ¡èŠ‚ç‚¹çš„{dataDir}/myidæ–‡ä»¶ä¸­")]),t._v(" "),v("p",[t._v("b). IPåœ°å€ï¼šèŠ‚ç‚¹çš„è¿œç¨‹IPåœ°å€ï¼Œå¯ä»¥ç›¸åŒï¼Œä½†ç”Ÿæˆç¯å¢ƒå°±ä¸èƒ½è¿™ä¹ˆåšäº†ï¼Œå› ä¸ºåœ¨åŒä¸€å°æœºå™¨å°±æ— æ³•è¾¾åˆ°å®¹é”™çš„ç›®çš„ã€‚")]),t._v(" "),v("p",[t._v("c). æ•°æ®åŒæ­¥ç«¯å£ï¼šä¸»ä»åŒæ—¶æ•°æ®å¤åˆ¶ç«¯å£")]),t._v(" "),v("p",[t._v("d). é€‰ä¸¾ç«¯å£ï¼šä¸»ä»èŠ‚ç‚¹é€‰ä¸¾ç«¯å£")]),t._v(" "),v("ol",[v("li",[t._v("é›†ç¾¤è§’è‰²è¯´æ˜")])]),t._v(" "),v("p",[t._v("å…±æœ‰ä¸‰ä¸ªè§’è‰²ï¼šleader(ä¸»èŠ‚ç‚¹)ï¼Œfollower(å­èŠ‚ç‚¹)ï¼Œobserver(æ¬¡çº§å­èŠ‚ç‚¹)")]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("è§’è‰²")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("æè¿°")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("leader")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("ä¸»èŠ‚ç‚¹ï¼Œåˆåé¢†å¯¼è€…ï¼Œç”¨äºå†™å…¥æ•°æ®ï¼Œé€šè¿‡é€‰ä¸¾äº§ç”Ÿï¼Œå¦‚æœå®•æœºå°†ä¼šé€‰ä¸¾æ–°çš„ä¸»èŠ‚ç‚¹")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("follower")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("å­èŠ‚ç‚¹ï¼Œåˆåè¿½éšè€…ã€‚ç”¨äºå®ç°æ•°æ®çš„è¯»å–ï¼ŒåŒæ—¶ä»–ä¹Ÿæ˜¯ä¸»èŠ‚ç‚¹çš„å¤‡é€‰èŠ‚ç‚¹ï¼Œå¹¶æ‹¥æœ‰æŠ•ç¥¨æƒ")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("observer")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("æ¬¡çº§å­èŠ‚ç‚¹ï¼Œåˆåè§‚å¯Ÿè€…ï¼Œç”¨äºè¯»å–æ•°æ®ï¼Œä¸followeråŒºåˆ«åœ¨äºæ²¡æœ‰æŠ•ç¥¨æƒã€‚")])])])]),t._v(" "),v("p",[t._v("observeré…ç½®ï¼š server.3=127.0.0.1:2889:3889:observer")]),t._v(" "),v("ol",{attrs:{start:"2"}},[v("li",[t._v("é€‰ä¸¾æœºåˆ¶")])]),t._v(" "),v("p",[t._v("a). ç¬¬ä¸€è½®æŠ•ç¥¨éƒ½æŠ•ç»™è‡ªå·±ã€‚")]),t._v(" "),v("p",[t._v("b). ç¬¬äºŒè½®æŠ•ç»™myidæ¯”è‡ªå·±å¤§çš„ç›¸é‚»èŠ‚ç‚¹ã€‚å¦‚æœè¶…è¿‡åŠæ•°ï¼Œåˆ™é€‰ä¸¾ç»“æŸã€‚")]),t._v(" "),v("p",[t._v("é€‰ä¸¾è§¦å‘ï¼š")]),t._v(" "),v("p",[t._v("a). æœåŠ¡èŠ‚ç‚¹åˆå§‹åŒ–å¯åŠ¨")]),t._v(" "),v("p",[t._v("b). åŠæ•°ä»¥ä¸Šçš„èŠ‚ç‚¹æ— æ³•å’ŒLeaderå»ºç«‹è¿æ¥")]),t._v(" "),v("p",[t._v("æœåŠ¡å¯åŠ¨çŠ¶æ€æ—¶ä¼šåœ¨é›†ç¾¤ä¸­å¯»æ‰¾leaderï¼Œå¦‚æœæ‰¾åˆ°åˆ™ä¸leaderå»ºç«‹è¿æ¥ï¼Œè‡ªèº«çŠ¶æ€å˜æˆfolloweræˆ–è€…observerã€‚å½“å‰èŠ‚ç‚¹çŠ¶æ€å˜åŒ–ä¸ºLOOKING,è¿›å…¥é€‰ä¸¾æµç¨‹ã€‚")]),t._v(" "),v("p",[t._v("åœ¨é›†ç¾¤è¿è¡ŒæœŸé—´å¦‚æœæœ‰followæˆ–observerèŠ‚ç‚¹å®•æœºï¼Œåªè¦ä¸è¶…è¿‡åŠæ•°å¹¶ä¸ä¼šå½±å“æ•´ä¸ªé›†ç¾¤æœåŠ¡çš„æ­£å¸¸è¿è¡Œã€‚ä½†å¦‚æœleaderå®•æœºï¼Œå°†æš‚åœå¯¹å¤–æœåŠ¡ï¼Œæ‰€æœ‰followerå°†è¿›å…¥LOOKINGçŠ¶æ€ï¼Œè¿›è¡Œé€‰ä¸¾ã€‚")]),t._v(" "),v("ol",{attrs:{start:"3"}},[v("li",[t._v("æ•°æ®åŒæ­¥æœºåˆ¶")])]),t._v(" "),v("p",[t._v("ä¸€ä¸ªæ˜¯æ­£å¸¸çš„å®¢æˆ·ç«¯å†™å…¥æµç¨‹ï¼Œå¦ä¸€ä¸ªæ˜¯æ–°èŠ‚ç‚¹æˆ–è€…é‡æ–°å¯åŠ¨åŠ å…¥æ—¶çš„æ•°æ®åŒæ­¥ã€‚")]),t._v(" "),v("p",[t._v("a). å¦‚æœå®¢æˆ·ç«¯å°†æ¶ˆæ¯å‘é€ç»™followerï¼Œè¯¥followerä¼šä¿¡æ¯å‘é€ç»™leaderï¼Œleaderä¼šå‘é€proposalè¯·æ±‚æ¶ˆæ¯ç»™æ‰€æœ‰followerï¼Œç„¶åfollowerå‘é€ACKç¡®è®¤æ¶ˆæ¯ç»™leaderï¼Œå¦‚æœæ”¶åˆ°è¶…è¿‡ä¸€èˆ¬çš„followerå‘é€äº†ackï¼Œleaderä¼šå‘é€commitæ¶ˆæ¯ç»™æ‰€æœ‰followerã€‚")]),t._v(" "),v("p",[t._v("b). éœ€è¦å…ˆæ‰¾leaderï¼Œç„¶åæŠŠæ•°æ®è¿›è¡ŒåŒæ­¥ã€‚é€šè¿‡ZXIDäº‹åŠ¡IDè¿›è¡Œæ¯”è¾ƒæ¥ç¡®è®¤æ˜¯å¦éœ€è¦æ•°æ®åŒæ­¥ã€‚ZXIDæ˜¯ä¸€ä¸ªé•¿åº¦ä¸º64ä½çš„æ•°å­—ã€‚ä½32ä½æ˜¯æŒ‰æ•°å­—é€’å¢ã€‚ä»»ä½•æ•°æ®çš„å˜æ›´éƒ½ä¼šå¯¼è‡´ï¼Œä½32ä½çš„æ•°å­—ç®€å•åŠ 1ã€‚é«˜32ä½leaderå‘¨æœŸç¼–å¯¼ï¼Œæ¯å½“é€‰ä¸¾å‡ºä¸€ä¸ªæ–°çš„leaderæ—¶ï¼Œæ–°çš„leaderå°±ä»æœ¬åœ°äº‹åŠ¡æ—¥å¿—ä¸­å–å‡ºZXIDï¼Œç„¶åè§£æå‡ºé«˜32ä½çš„å‘¨æœŸç¼–å¯¼ï¼Œè¿›è¡ŒåŠ 1ï¼Œå†å°†ä½32ä½çš„å…¨éƒ¨è®¾ç½®ä¸º0. ä¿è¯æ¯æ¬¡é€‰ä¸¾leaderåï¼ŒZXIDçš„å”¯ä¸€æ€§å¹¶ä¸”æ—¶é€’å¢çš„ã€‚")]),t._v(" "),v("h3",{attrs:{id:"zookeeper-å…¸å‹ä½¿ç”¨åœºæ™¯"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#zookeeper-å…¸å‹ä½¿ç”¨åœºæ™¯"}},[t._v("#")]),t._v(" zookeeper å…¸å‹ä½¿ç”¨åœºæ™¯")]),t._v(" "),v("ol",[v("li",[t._v("åˆ†å¸ƒå¼é›†ç¾¤ç®¡ç†")])]),t._v(" "),v("p",[t._v("a). ä¸»åŠ¨æŸ¥çœ‹çº¿ä¸ŠæœåŠ¡èŠ‚ç‚¹")]),t._v(" "),v("p",[t._v("b). æŸ¥çœ‹æœåŠ¡èŠ‚ç‚¹èµ„æºä½¿ç”¨æƒ…å†µ")]),t._v(" "),v("p",[t._v("c). æœåŠ¡ç¦»çº¿é€šçŸ¥")]),t._v(" "),v("p",[t._v("d). æœåŠ¡èµ„æº(CPU, å†…å­˜ï¼Œç¡¬ç›˜)è¶…å‡ºé˜ˆå€¼é€šçŸ¥")]),t._v(" "),v("ol",{attrs:{start:"2"}},[v("li",[t._v("åˆ†å¸ƒå¼æ³¨å†Œä¸­å¿ƒ")])]),t._v(" "),v("p",[t._v("a). æœåŠ¡æ³¨å†Œï¼šæä¾›è€…ä¸Šçº¿æ—¶å°†è‡ªæä¾›çš„æœåŠ¡æäº¤ç»™æ³¨å†Œä¸­å¿ƒ")]),t._v(" "),v("p",[t._v("b). æœåŠ¡æ³¨é”€ï¼šå°†æœåŠ¡ä¸‹çº¿")]),t._v(" "),v("p",[t._v("c). æœåŠ¡è®¢é˜…ï¼šåŠ¨æ€å®æ—¶æ¥æ”¶æœåŠ¡å˜æ›´æ¶ˆæ¯")]),t._v(" "),v("p",[t._v("d). å¯é ï¼šæ³¨å†ŒæœåŠ¡æœ¬èº«æ˜¯é›†ç¾¤çš„ï¼Œæ•°æ®å†—ä½™å­˜å‚¨ã€‚é¿å…å•ç‚¹æ•…éšœï¼ŒåŠæ•°æ®ä¸¢å¤±")]),t._v(" "),v("p",[t._v("e). å®¹é”™ï¼šå½“æœåŠ¡å™¨æä¾›è€…å‡ºç°å®•æœºï¼Œæ–­ç”µç­‰æƒ…å†µæ—¶ï¼Œæ³¨å†Œä¸­å¿ƒèƒ½åŠ¨æ€æ„ŸçŸ¥å¹¶é€šçŸ¥å®¢æˆ·ç«¯æœåŠ¡æä¾›è€…çš„çŠ¶æ€ã€‚")]),t._v(" "),v("ol",{attrs:{start:"3"}},[v("li",[t._v("åˆ†å¸ƒå¼JOB")])]),t._v(" "),v("p",[t._v("ä¿è¯æ¯ä¸ªæ—¶é—´ç‚¹åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹è¿è¡Œjobï¼Œä½¿ç”¨ä¸»ä»ã€‚")]),t._v(" "),v("ol",{attrs:{start:"4"}},[v("li",[t._v("åˆ†å¸ƒå¼é”")])]),t._v(" "),v("p",[t._v("a). åˆ›å»ºä¸´æ—¶åºå·èŠ‚ç‚¹(æ ‡è¯†ä¸ºè¯»)")]),t._v(" "),v("p",[t._v("b). è·å–æ‰€æœ‰åºå·æ¯”è‡ªå·±å°çš„èŠ‚ç‚¹")]),t._v(" "),v("p",[t._v("c). åˆ¤æ–­æ˜¯å¦å…¨éƒ¨ä¸ºè¯»èŠ‚ç‚¹")]),t._v(" "),v("p",[t._v("d). å¦‚æœæ˜¯åˆ™è·å–æˆ")]),t._v(" "),v("p",[t._v("e). å¦åˆ™æ·»åŠ å­èŠ‚ç‚¹å˜æ›´ç›‘å¬ï¼Œè¿›è¡Œé“¾è¡¨ç›‘å¬ï¼Œç›‘å¬å‰ä¸€ä¸ªèŠ‚ç‚¹ã€‚")]),t._v(" "),v("h3",{attrs:{id:"æ ¸å¿ƒæºç è§£æ"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#æ ¸å¿ƒæºç è§£æ"}},[t._v("#")]),t._v(" æ ¸å¿ƒæºç è§£æ")]),t._v(" "),v("p",[t._v("ä¸»è¦æ˜¯ zookeeper-server")]),t._v(" "),v("p",[t._v("é›†ç¾¤å¯åŠ¨ï¼šQuorumPeerMain")]),t._v(" "),v("p",[t._v("å¯åŠ¨&åŠ è½½é…ç½®ï¼šQuorumPeerMain")]),t._v(" "),v("p",[t._v("åˆå§‹åŒ–å¤–å¯¹æœåŠ¡ï¼šSeverCnxnFactoryï¼Œç½‘ç»œç¼–ç¨‹(Netty)")]),t._v(" "),v("p",[t._v("åˆå§‹åŒ–å†…å­˜æ•°æ®åº“ï¼šZKDatabase")]),t._v(" "),v("p",[t._v("åˆå§‹åŒ–ä¼šè¯ç®¡ç†å™¨ï¼šSessionTrackerImpl")]),t._v(" "),v("p",[t._v("åˆå§‹é€‰ä¸¾ï¼šFastLeaderElection")]),t._v(" "),v("p",[t._v("å•æœºå¯åŠ¨ï¼šZookeeperServerMain")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("QuorumPeer  // æ£€æŸ¥æœåŠ¡çŠ¶æ€\n\nFileTxnSnapLog  // æ„å»ºæ—¥å¿—ç®¡ç†å™¨ï¼Œæ£€æŸ¥dataDirï¼Œäº‹åŠ¡æ—¥å¿—ç›®å½• snapDirå¿«ç…§ç›®å½•\n\nFileTxnLog  // è¯»å†™äº‹åŠ¡æ—¥å¿—æ–‡ä»¶\n\nFileSnap  // è¯»å†™å¿«ç…§\n\n")])])]),v("p",[t._v("a). å¯åŠ¨æµç¨‹å †æ ˆ")]),t._v(" "),v("p",[t._v("å•æœºï¼š")]),t._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[t._v("1. è·å–configé…ç½®\n\n2. è§£æconfigé…ç½®ï¼Œå¹¶è¿›è¡Œèµ‹å€¼\n\n3. æ„é€ ä¸€ä¸ªæ•°æ®æ¸…ç†å™¨ï¼Œä¸»è¦ç”¨äºæ¸…ç†å¿«ç…§ã€‚\n\n4. åˆ›å»ºæœåŠ¡å·¥å‚å˜ï¼Œåˆå§‹åŒ–å¯¹å¤–æœåŠ¡ï¼Œå¯åŠ¨ä¸€ä¸ªNioï¼Œå¯ä»¥è®¾ç½®ä¸ºNetty\n\n5. å¯åŠ¨æœåŠ¡ã€‚åŠ è½½æ•°æ®ï¼Œå¯åŠ¨nettyæœåŠ¡ï¼Œå¯åŠ¨adminï¼Œå¯åŠ¨é€‰ä¸¾\n\n")])])]),v("p",[t._v("b). å¿«ç…§ä¸äº‹åŠ¡æ—¥å¿—å­˜å‚¨ç»“æ„")]),t._v(" "),v("p",[t._v("äº‹åŠ¡æ—¥å¿—ï¼šæ¯æ¬¡å¢åˆ æ”¹çš„è®°å½•éƒ½ä¼šä¿å­˜åœ¨æ–‡ä»¶ä¸­")]),t._v(" "),v("p",[t._v("å¿«ç…§æ—¥å¿—ï¼Œå­˜å‚¨äº†æŒ‡å®šæ—¶é—´ä¸‹çš„æ‰€æœ‰æ•°æ®")])])}),[],!1,null,null,null);e.default=a.exports}}]);